# ==============================================================================
# DEMETER API - Environment Variables Template
# ==============================================================================
# Este é um template das variáveis de ambiente necessárias para executar a API.
# Copie este arquivo para .env e preencha com seus valores reais.
#
# IMPORTANTE: Nunca commite o arquivo .env com valores reais!
# ==============================================================================

# ==============================================================================
# APPLICATION SETTINGS
# ==============================================================================

# Nome do projeto
PROJECT_NAME=DEMETER-API

# Versão da API
VERSION=1.0.0

# Descrição
DESCRIPTION="API para classificação de grãos com IA"

# Prefixo da API (ex: /api/v1)
API_V1_STR=/api/v1

# Ambiente de execução: development, staging, production
ENVIRONMENT=development

# Modo debug (true/false) - Automaticamente false em production
DEBUG=true

# ==============================================================================
# DATABASE SETTINGS
# ==============================================================================

# URL de conexão com PostgreSQL usando AsyncPG
DATABASE_URL=postgresql+asyncpg://demeter:demeter_dev@db:5432/demeter_db

# Habilitar logs SQL (true/false) - Automaticamente false em production
DATABASE_ECHO=true

# Tamanho do pool de conexões (1-20)
DATABASE_POOL_SIZE=5

# Máximo de conexões extras além do pool (0-50)
DATABASE_MAX_OVERFLOW=10

POSTGRES_USER=demeter
POSTGRES_PASSWORD=demeter_dev
POSTGRES_DB=demeter_db
POSTGRES_PORT=5432

# ==============================================================================
# SECURITY & AUTHENTICATION
# ==============================================================================

# Chave secreta para assinatura de tokens JWT (MÍNIMO 32 caracteres)
SECRET_KEY=your-super-secret-key-change-this-min-32-chars-please

# Algoritmo de criptografia JWT (HS256 recomendado)
ALGORITHM=HS256

# Tempo de expiração do access token em minutos (5-60)
ACCESS_TOKEN_EXPIRE_MINUTES=15

# Tempo de expiração do refresh token em dias (1-30)
REFRESH_TOKEN_EXPIRE_DAYS=7

# ==============================================================================
# PASSWORD POLICY
# ==============================================================================

# Tamanho mínimo da senha (mínimo 8)
PASSWORD_MIN_LENGTH=8

# Exigir letra maiúscula na senha (true/false)
PASSWORD_REQUIRE_UPPERCASE=true

# Exigir letra minúscula na senha (true/false)
PASSWORD_REQUIRE_LOWERCASE=true

# Exigir número na senha (true/false)
PASSWORD_REQUIRE_DIGIT=true

# Exigir caractere especial na senha (true/false)
PASSWORD_REQUIRE_SPECIAL=true

# ==============================================================================
# CORS SETTINGS
# ==============================================================================

# Origens permitidas (separadas por vírgula)
# Exemplo: http://localhost:3000,https://app.demeter.com
ALLOWED_ORIGINS=http://localhost:3000

# Métodos HTTP permitidos (separados por vírgula)
ALLOWED_METHODS=GET,POST,PATCH,DELETE

# Headers permitidos (separados por vírgula)
ALLOWED_HEADERS=Authorization,Content-Type

# Permitir envio de cookies/credenciais (true/false)
ALLOW_CREDENTIALS=true

# ==============================================================================
# RATE LIMITING
# ==============================================================================

# Rate limit para endpoint de login (formato: X/Yminute)
# Exemplo: 5/15minute = 5 tentativas a cada 15 minutos
RATE_LIMIT_LOGIN=5/15minute

# Rate limit para endpoints autenticados
RATE_LIMIT_AUTHENTICATED=100/minute

# Rate limit para endpoints públicos
RATE_LIMIT_PUBLIC=20/minute

# ==============================================================================
# LOGGING
# ==============================================================================

# Nível de log: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Formato do log: json (produção), console (desenvolvimento)
LOG_FORMAT=console

# Diretório para armazenar logs
LOG_DIR=logs

# ==============================================================================
# FILE UPLOAD SETTINGS
# ==============================================================================

# Tamanho máximo de upload em bytes (10MB = 10485760)
MAX_UPLOAD_SIZE=10485760

# Tipos de imagem permitidos (separados por vírgula)
ALLOWED_IMAGE_TYPES=image/jpeg,image/png,image/jpg

# Diretório temporário para uploads
UPLOAD_DIR=uploads

# ==============================================================================
# AWS S3 SETTINGS (Opcional - para armazenamento em nuvem)
# ==============================================================================

# Usar AWS S3 para armazenamento (true/false)
USE_S3=false

# AWS Access Key ID (deixe vazio se USE_S3=false)
AWS_ACCESS_KEY_ID=

# AWS Secret Access Key (deixe vazio se USE_S3=false)
AWS_SECRET_ACCESS_KEY=

# Região AWS (padrão: us-east-1)
AWS_REGION=us-east-1

# Nome do bucket S3 (deixe vazio se USE_S3=false)
S3_BUCKET_NAME=

# ==============================================================================
# SUPABASE SETTINGS
# ==============================================================================

# URL do projeto Supabase
SUPABASE_URL=

# API Key do Supabase (anon/public key)
SUPABASE_KEY=

# Usar Supabase Storage para uploads (true/false)
# Se true, os uploads vão para Supabase ao invés de filesystem local
USE_SUPABASE_STORAGE=false

# Configurações do Storage S3 do Supabase
# Necessário apenas se USE_SUPABASE_STORAGE=true
SUPABASE_STORAGE_ENDPOINT=
SUPABASE_STORAGE_REGION=sa-east-1
SUPABASE_STORAGE_ACCESS_KEY_ID=
SUPABASE_STORAGE_SECRET_ACCESS_KEY=

# ==============================================================================
# DEMETER ML API SETTINGS
# ==============================================================================

# Usar API de IA real ao invés de mock (true/false)
USE_REAL_ML_API=false

# URL do endpoint de classificação
DEMETER_ML_API_URL=https://3kgtn4mls7.execute-api.us-east-2.amazonaws.com/upload

# Timeout para chamadas à API de IA (em segundos)
DEMETER_ML_TIMEOUT=30.0

# Habilitar fallback para mock em caso de erro (true/false)
# Recomendado: true em development/staging, false em production
ENABLE_ML_FALLBACK_TO_MOCK=true

